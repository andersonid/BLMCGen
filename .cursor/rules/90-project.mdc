---
description: Project memory (facts, decisions, commands).
alwaysApply: true
---

# BMCMarkdown / BLMCGen — Project memory (90-project)

## Identidade
- Nome: BLMCGen (BMC/LMC Markdown Generator)
- Repo: https://github.com/andersonid/BLMCGen.git (package.json)
- Produção: https://bmc.nobre.ninja (Coolify)
- Frontend: estático (HTML/CSS/JS) — `index.html` + `js/app-simple.js`
- Backend: Node.js + Express em `backend/` (auth JWT, CRUD canvas, RBAC, PostgreSQL)
- DB/Infra: Docker Compose (PostgreSQL) + Nginx (proxy reverso + URLs limpas); deploy via Coolify

## URLs (produção)
- `/` — app principal
- `/login` — login/registro
- `/admin` — painel admin (requer role admin)
- `/api/*` — API (proxy Nginx → backend:3001)

## RBAC
- Modelo: roles + permissions granulares (tabelas: `roles`, `permissions`, `role_permissions`, `user_roles`)
- Permissions no formato `resource:action` (ex: `user:list`, `canvas:delete_any`, `admin:dashboard`)
- Middlewares: `requireRole()` e `requirePermission()` em `backend/middleware/authorize.js`
- `authenticateToken` carrega roles/permissions do banco + checa `is_active`
- Admin padrão: `admin@bmcgen.com` / `admin123`
- Migration: `backend/migrations/001_rbac.sql`

## Como rodar (alto nível)
- Frontend (rápido): abrir `index.html` no navegador
- Dev server simples (opcional): `npm run dev` (Python http.server na porta 8000)
- Backend:
  - `npm run backend:install`
  - `npm run backend:dev`
- Stack completa: `docker-compose up -d`

## Deploy
- Ver `README-DEPLOY.md`, `docker-compose.yml`.
- Health (backend): `GET /health` (ver README-DEPLOY).

## Convenções
- Antes de qualquer mudança: ler `README.md` e alinhar com o objetivo.
- Mudanças grandes: propor patch/diff e pedir aprovação.
